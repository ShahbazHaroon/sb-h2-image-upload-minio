# Spring Active Profile
spring.profiles.active=dev

##### Spring Application Information #####
spring.application.name=@artifactId@
server.servlet.context-path=/sb-h2-image-upload-minio

# Enable lazy initialization to reduce startup time
spring.main.lazy-initialization=true

# Enable Graceful Shutdown
server.shutdown=graceful

# Graceful Shutdown
spring.lifecycle.timeout-per-shutdown-phase=30s

# Apache Portable Runtime (APR)
server.tomcat.apr.enabled=false
server.tomcat.max-http-header-size=5000000

##### Increase Maximum File Upload Size (if dealing with large documents) #####
user.profile.photo.upload.path=
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

##### Default Encoding #####
spring.http.encoding.enabled=true
spring.http.encoding.charset=UTF-8
spring.http.encoding.force=true

##### Enable Compression to Reduce Payload Size #####
server.compression.enabled=true
server.compression.mime-types=text/html, text/xml, text/plain, text/css, application/javascript, application/json, application/xml
server.compression.min-response-size=1024

##### Swagger Information #####
springdoc.version=1.0.0
springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method

# To disable the OpenAPI endpoint
#springdoc.api-docs.enabled=false

# To disable Swagger UI
#springdoc.swagger-ui.enabled=false

# For Actuator Endpoint
springdoc.show-actuator=false

##### Monitoring and Metrics #####
# Actuator
#management.server.port=8081
management.endpoints.web.exposure.include=*
#management.endpoints.web.exposure.include=health,info,metrics
#management.endpoint.health.show-details=always
#management.endpoint.health.probes.enabled=true
# Prometheus
#management.metrics.export.prometheus.enabled=true
#management.metrics.export.prometheus.endpoint=/actuator/prometheus
# Security for Actuator Endpoints
management.endpoints.web.exposure.exclude=env,beans,mappings
management.endpoints.jmx.exposure.exclude=*

##### Spring Application Logs #####
logging.file.clean-history-on-start=true
#logging.file.path=/tmp/log
logging.file.name=${LOG_FILE_PATH:logs/${spring.application.name}/${spring.application.name}.log}
logging.file.max-size=10MB
logging.file.total-size-cap=1GB
logging.file.max-history=30
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %logger{36} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

##### Tomcat Access Logs #####
server.tomcat.accesslog.enabled=true
server.tomcat.accesslog.directory=logs
server.tomcat.accesslog.pattern=%h %l %u %t "%r" %s %b "%{Referer}i" "%{User-Agent}i"
server.tomcat.accesslog.rotate=true

##### Tomcat Server Configuration #####
# Increase max threads to handle concurrent requests
server.tomcat.max-threads=500
# Minimum threads to keep idle
server.tomcat.min-spare-threads=50
# Keepalive timeout (in milliseconds)
server.tomcat.connection-timeout=20000
# Maximum queue size for incoming requests
server.tomcat.accept-count=200
# Enable HTTP/2 for better performance (requires Java 9+)
server.http2.enabled=true

##### HTTP Connection Pooling #####
spring.httpclient.connection-time-to-live=5000ms
spring.httpclient.max-connections-per-route=50
spring.httpclient.max-total-connections=200

##### Thread Pool for Async Operations #####
#spring.task.execution.pool.core-size=20
#spring.task.execution.pool.max-size=50
#spring.task.execution.pool.queue-capacity=500
#spring.task.execution.thread-name-prefix=async-task-

##### Session Management #####
server.servlet.session.timeout=30m

##### HTTP Headers #####
server.tomcat.protocol-header=x-forwarded-proto
server.tomcat.remote-ip-header=x-forwarded-for

##### X-Content-Type-Options Header #####
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=true

##### CSRF Protection #####
spring.security.enable-csrf=true

##### Use HTTPS in Production (set up external proxy or load balancer) #####
server.ssl.enabled=false
#server.ssl.key-store=classpath:keystore.p12
#server.ssl.key-store-password=yourPassword
#server.ssl.key-store-type=PKCS12
#server.ssl.key-alias=tomcat

##### JVM and Memory Management #####
# Configure JVM settings (via the JAVA_OPTS or VM Arguments in deployment script)
#Xms2G -Xmx4G
# Enable Garbage Collector tuning
#-XX:+UseG1GC -XX:MaxGCPauseMillis=200

##### HikariCP Connection Pool Configuration #####
spring.datasource.hikari.maximum-pool-size=50
spring.datasource.hikari.minimum-idle=10
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.keepalive-time=300000
spring.datasource.hikari.pool-name=HikariCP
#spring.datasource.hikari.connection-test-query=SELECT 1